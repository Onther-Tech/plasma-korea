# 플라즈마 지분증명

우리는 단순한 지분증명 증명 구조를 제안합니다. 이것이 최적의 지분증명 구조가 아닐지라도, 플라즈마 체인에서 가능한 방식을 설명하고 있습니다.

지금까지 플라즈마 체인의 운영자가 블록에서 서명을 담당하는 단일 개체라고 가정했습니다. 잘못된 블록을 만들면 블록 데이터가 있는 다른 모든 사람이 사기 증명 증거를 생성하고 운영자에게 패널티와 함께 블록을 롤백할 수 있습니다. 이 증거는 운영자가 서명으로 블록에서 서명했기 때문에 가능합니다. 루트 체인에 Merkleized된 플라즈마 블록의 커밋이 게시되므로(가장 상위의 플라즈마 블록은 하위 체인의 상태 업데이트를 포함하므로), 상태 업데이트가 올바르게 작동하도록 정렬되고 결합됩니다.

그러나 대부분의 경우 단일 개체가 증명하는 체인보다 지분증명 체인을 구성하는 것이 좋습니다. 이렇게 하면 block withholding문제와 관련된 위험을 최소화 할 수 있습니다(단일 개체가 증명하는 체인과 다수의 지분증명 체인을 결합함으로서 두 방식의 최대 장점을 활용 하는것도 가능합니다.) 토큰화 된 지분증명 체인은 악의적 행위(Byzantine behavior)에 따라 토큰의 가치가 감소하므로 토큰 제조자가 올바르게 작동할 수 있는 동기를 부여합니다. 토큰화의 잠재적 가치에 대한 자세한 내용은 이후 섹션에서 설명합니다.

이는 루트 체인의 견고성에 의존하기 때문에, 지분증명 구조는 플라즈마를 구성하기에 용이합니다. withholding 문제, 최종성(finality) 및 기타 요인과 관련된 문제는 루트 체인의 신뢰성으로부터 영향을 받습니다. 플라즈마는 루트 체인만큼 안전 할 수 있습니다. 루트 체인이 작업증명(Proof of Work)을 방식인 경우, 작업 증명에 대한 지분증명 방식이 될 것입니다 (루트 블록체인에 대한 각각의 플라즈마). 루트 체인이 지분증명(Proof of Stake)인 경우, 지분 증명에 대한 지분증명 방식이 될 것입니다. 그러나 지분증명 메커니즘은 루트 체인에서 실행되는 것보다 간단하거나 다를 수 있습니다.

## 나카모토 합의 인센티브

우리는 Nakamoto 합의(Proof of Work 마이닝)의 주요 인센티브를 재현하려고 시도합니다. 재현하고자하는 가장 중요한 인센티브 중 하나는 다른 마이너에게 블록 전파를 장려하는 것입니다.

기존에 제안된 많은 지분증명 메커니즘은 리더를 선거하는 것에 달려 있는데, 시간 t0에서 리더가 선출되면 시간 t1에 리더는 블록을 생산할 권리가 있습니다. 이것은 블록 전파와 관련하여 Nakamoto 합의 인센티브를 재현하는 것이 아닙니다. Nakamoto 합의는 리더를 선출하기는 하지만 확률적으로 리더를 선출합니다. 블록을 발견한 사람이 리더가 될 가능성이 높지만 완전히 확신 할 수 없습니다. 다른 누군가가 정확히 같은 순간에 블록을 채굴 할 수 있기 때문입니다. 리더가 되기 위한 확률을 최대화하는 가장 좋은 방법은 블록을 가능한 한 멀리 넓게 브로드캐스팅하여 다른 사람들이 그 위에 블록을 쌓을 수 있도록 하는 것입니다. 이 경우 정보 가용성으로 인해 인센티브가 창출됩니다.

플라즈마의 지분증명 구조는 위 방식과 비슷해야 할 필요가 있습니다.

우리는 모든 사람이 가능한 한 광범위하게 블록을 전파하도록 권장한다는 점에서 타협점을 만들었습니다. 그러나 이것 외에 다른 구조도 있을 수 있습니다(특히 무작위 점수를 특정 branches에 할당하고, 무작위 점수가 가장 높은 branch로 체인의 마지막을 결정함으로써 무작위 선택과 확률론적 지도자 선거에 대한 의존도를 높이는 것).


## 간단한 지분증명 모델의 예시

이것은 지분증명 모델을 만드는 간단한 제안이지만, 어디서나 최적화되지는 않습니다. 목표는 플라즈마가 사용할 수 있는 간단한 예시를 만드는 것입니다.

강제되는 메커니즘을 만드는 대신 적절한 조정과 올바른 행동(블록 전파)에 대한 인센티브를 만드는 것입니다.

수수료는 루트체인의 컨트랙트에 의해 할당되고 분배되며 원할 경우 주기적으로 지불되지만 요금 계산(accounting)은 체인 자체 내에서 이루어집니다.

staking 컨트랙트의 일환으로, 지분 보유자들의 기금을 위임 된 사람(staker)에게 할당됩니다. 위임 된 사람(staker)은 사용자를 대신해서 행동할 책임이 있으며 만약 위임 된 사람(staker)이 잘못을 한다면 사용자는 불이익을 받습니다. Staking은 특정 시간(e.g. 3개월) 동안 수행됩니다. 각 보유자(staker)별 최소 금액은 모든 토큰의 1 %이며 최대 한도는 5 %입니다. 5 % 이상 할당하려는 경우, 여러 개의 staking 신원을 사용해야합니다 (목적은 데이터 분배를 최대화하고 51% cartels 이하의 효과를 최소화하는 것입니다).

자금은 지난 100개의 플라즈마 블록이 모든 참가자를 대표하는지 여부에 따라 할당됩니다. 예를 들어, 누군가가 stakers의 3%에 자금을 건 경우, 그들은 이전의 100 블록의 3 %이어야합니다. 이 금액을 초과하는 경우, 개별 보유자(staker)는 여분의 블록 약정 게시에 대한 추가 보상을 받지 못합니다. 지난 100 개의 블록이 3 개 미만이면 현재 블록 작성자는 더 적은 보상을 받습니다. 루트 체인에서 블록 당 하나의 블록만 할당 할 수 있습니다.

이렇게 하면 모든 참가자가 모두의 블록을 동일하게 조정하고 포함시킬 수 있습니다. 참가자들은 최대한의 보상을 보장하기 위해 일종의 조직(scheme)(e.g. 라운드 로빈)을 조정하고 보장합니다.

부적절한 금액으로 인해 거래 수수료가 최대치를 받지 못하면, 미래의 블록을 위해 자금이 풀에 할당됩니다.

그 결과 모두가 참여하도록 경제적으로 격려합니다.

그러나, 우리는 보유자들(stakers)로부터 정확한 참여를 장려할 뿐이기 때문에 아직 완성된 것은 아닙니다. 모든 블록은 지난 100 개의 블록에서 무작위 부분에 대한 데이터를 merkleized한 약정입니다. 이렇게 하면 보유자(staker)가 전체 블록 데이터를 갖게 되고 결과적으로 블록 생성자가 모든 보유자들(stakers)에게 전파해야합니다.

병렬적인 branches가 있는 경우, 체인의 마지막은 최대 보상에 의해 결정됩니다. 즉, 최대로 조정한 것에서 최대의 수수료 보상이 있는 것이 이기게 되어있습니다.

이 구조는 51% 공격을 막기 위해 설계된 것이 아니라 블록 전파를 권장하도록 설계 되었습니다(블록을 ​​보류하도록 설정하면 위협이 동일하므로). 또한, 이 구성은 루트 체인에 정보 가용성 및 공평성에 의존합니다. ; 데이터 가용성 및 검열 인센티브에 대한 가정 때문에 루트 체인에 이러한 유형의 지분증명을 구축하는 것은 불가능합니다.
