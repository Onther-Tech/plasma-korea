# 블록체인을 위한 맵리듀스

MapReduce에서 계산할 수 있는 거의 모든 것이 체인에서도 계산 가능해야합니다. 이를 위해서는 블록체인에서 계산과 프로그래밍에 관해 생각하는 방식을 철저히 재구성해야합니다. 이것은 MapReduce이지만 사기 증명을 할 수 있습니다. 각 노드는 블록체인을 나타냅니다. 이는 이전 섹션에서 설명한 플라즈마 블록체인 트리 구조와 호환됩니다.

E.g. 표준 단어 수의 카운트를 원하는 경우, reduce 함수를 사용하는 체인의 머클트리를 만들 수 있습니다. 사기의 증거가 있는 경우 사기를 일으킨 노드는 불이익을 받습니다. 합계에 대해 reduce 함수를 생성 할 수 있으면 평균도 생성 할 수 있습니다. (E.g.평균 가격 등) Map 함수는 계산을 개별 체인에 전송 한 다음 결과를 커밋하는 것입니다. 분명히, 데이터 처리량에 대한 제약이 있기 때문에 이는 사기 증명을 줄이는 것이 왜 필요한지를 보여줍니다. 이는 모든 유형의 임의 계산은 불가능하지만 많은 유형의 문제를 해결할 수 있습니다 ; 일반적으로 메모리제약문제는 우선적으로 sorting 알고리즘을 실행하여 해결할 수 있으며, 이로 인해 플라즈마 체인 간 트래픽의 균형을 유지시킵니다.

노드가 계산을 증명하기 위해 실제 블록을 생성 할 수 없으면 결과를 버리고 롤백 해야합니다. 이것은 MapReduce가 수행하는 계산의 확장성을 보장하지는 않지만(컨센서스를 유지하기 위해 체인을 관찰해야하므로), 액티비티를 시행하고 액터에 맞게 확장 할 수 있는 기능을 제공합니다. 그 결과, 주요한 제한사항은 특정 계산에 영향을 받는 당사자가 해당 계산 집합을 관찰해야한다는 사실에 있습니다. 만약 하나의 작은 부분을 관찰 할 필요가 있다면 괜찮을 것입니다. 그러나 모든 계산을 관찰 할 필요가 있다면 그것은 확장성의 이점을 제공하지 않습니다.(오직 확장성을 가능하게 해주는 것만 보장한다는 이점만 있음) 즉, 많은 문제가 이러한 방식으로 해결 될 수 있습니다. e.g. 탈중앙화 된 환전(exchange) ( 매핑 된 집합(set)은 자신의 거래는 신경 쓰지만, 다른 모든 사람들이 실행을 통제 할 수 있다면 세부 사항에 신경 쓰지 않아도 됩니다.)

 블록 포맷은 TrueBit 구조에서 계산할 수 있는 데이터와 호환 가능해야합니다. 상태에 대한 약속 (포함되었는지 제외시 상태 전환의 증거를 허용하는 UTXO / 상태 트라이를 구성 할 수 있음), 계정 트라이 (하위 체인 및 복잡한 상태 전이), 요금 약정 (상태를 확약하는 트리) 부모 / 자식 블록에서 전달 된 데이터에 대한 약속, 부모 / 자식 블록 (재주문 방지) 및 비즈니스 로직 (예 : 단어 수 계산의 예는 단어에 대한 merkleized sorted commitment를가집니다. 그리고 그것을 보았던 곳). Merkle 약정을 구성함으로써 루트 또는 상위 체인에서 입증 할 수있는 현명한 계약을 만들 수 있습니다.이 계약은 잘못된 상태 전이를 증명할 수 있습니다. 이 형식과 호환되지 않는 문제 세트가 있지만 중요한 메모리 요구 사항이없는 일반적인 계산이 가능합니다. 이를위한 정신적 인 틀은 계산을위한 최대 메모리 크기를 사기 증거에 허용 된 최대 데이터와 동일하게 취급하는 것입니다.

일련의 map 및 reduce 함수는 블록체인이 데이터를 처리 할 의무가 있는 방식으로 작동 하도록 합니다. 이는 부모 체인과 자식 체인이 데이터 처리 의무를 지도록 합니다. 자식 체인은 부모 체인에 데이터를 전달하는 것을 포함해야 하며 그렇지 않으면 자식 체인은 중단될 것입니다. 부모 체인은 자식 체인들에게 계산을 실행하도록 할 수 있으며, 만약 자식 체인들이 멈추면 부모 체인에 있는 데이터를 브로드 캐스팅하고 그 증거를 증명함으로써 계산을 시행 할 수 있습니다. TrueBit 구조의 주된 위협은 정지 관련 문제와 관련이 있기 때문에, 시간이 지남에 따라 복잡해지더라도 만약 자식 체인이 중단 되어도 계속해서 작동 할 수 있도록 주의를 기울여야합니다 (데이터 셋이 변경될 수 있고 시간 일관성을 갖는 것이 일부 문제에 대해 추론하기가 더 어렵습니다.)

map and reduce 프레임 워크를 이용하는 자식 체인에서 블록체인 계산을 하게함으로써. 기존의 컴퓨터 과학 연구를 수행하고 블록체인에 존재하는 탈중앙화 시스템에 대한 문제들에 직접 적용할 수 있습니다. 확장 가능한 방식으로 많은 유용한 비즈니스 애플리케이션을 생성하는 Solidity 컨트랙트를 구성 할 수 있습니다. 여기서는 자신과 관련된 활동만 계산하고 확인하면 됩니다.
